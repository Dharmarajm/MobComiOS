# For more information about this configuration visit
# https://docs.fastlane.tools/actions/gym/#gymfile

# In general, you can use the options available
# fastlane gym --help

# Remove the # in front of the line to enable the option

 scheme("Mobcom")
 # sdk("iphoneos9.0")
 # disable_automatic_code_signing(path: "MobCom.xcodeproj")
 clean(true)
 export_method("ad-hoc") 
 export_team_id(ENV["FASTLANE_TEAM_ID"])
 include_bitcode(false)
 include_symbols(true)
 configuration("Release")
 output_directory("~/Library/Developer/Xcode/Archives/")    # store the ipa in this folder
 output_name("MobCom.ipa")           # the name of the ipa file
 buildlog_path("~/Library/Logs/fastlane/xcbuild")
 
 export_xcargs("-allowProvisioningUpdates")
 # codesigning_identity("iPhone Distribution")
 
 # bundleIdentifier = ENV["PRODUCE_APP_IDENTIFIER"]
 # profile = "match AdHoc com.mobcom.altius"
 
 export_options = {
  method: "ad-hoc",
  signingStyle: "manual",
  teamID: ENV["FASTLANE_TEAM_ID"],  
  manifest: {
      appURL: "https://server.local/apps/MobCom.ipa",
      displayImageURL: "https://server.local/TestApp.png",
      fullSizeImageURL: "https://server.local/TestApp.png"
  },
  thinning: "<thin-for-all-variants>",
  provisioningProfiles: {
    ENV['SIGH_APP_IDENTIFIER'] => ENV['SIGH_PROVISIONING_PROFILE_NAME']
  },
  signingCertificate: "iPhone Distribution"
 }
   
   
   
#output_directory("./")


 #export_options= {
    #scheme: 'adhoc',
    #configuration: 'adhoc',
    #signingStyle: "automatic",
    #codeSignIdentity: "iPhone Distribution",
    #method: "ad-hoc",
    #export_xcargs: "-allowProvisioningUpdates",
    #manifest: {
      #appURL: "https://server.local/apps/MobCom.ipa",
      #displayImageURL: "https://server.local/apps/TestApp.png",
      #fullSizeImageURL: "https://server.local/apps/TestApp.png"
    #},
    #thinning: "<thin-for-all-variants>",
    #provisioningProfiles: { 
    #"com.mobcom.altius" => "Mobcomdis"
    #}
   #}