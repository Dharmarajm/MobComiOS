<ion-view cache-view="false">
  <link href="css/employeelist.css" rel="stylesheet" cache-view="false">
  
  <ion-header-bar>
         <div class="row">
             <div class="col col-10" ng-click="empback()"><i class="button-icon ion-android-arrow-back close"></i></div>             
             <div class="col col-80" > <p class="titletext">Employees</p></div>
             <div class="col col-10" ng-click="logout()"><i class="button-icon ion-log-out close" ></i></div>
         </div>
  </ion-header-bar>   

<div class="bar bar-subheader item-input-inset row">
     <div class="row" >
        <label class="item-input-wrapper">
          <i class="icon ion-search"></i>
          <input type="search" placeholder="Search" ng-model="search">         
        </label>
     </div>       
  </div>


  <ion-content class="content_back search has-header has-subheader" padding="true" has-bouncing="false" ng-init="employlist()">
   
          <div class="list search" ng-repeat="emp in EmployeesDetails | orderBy : 'first_name' | filter:search">
            <a class="item item-avatar item-icon-right">
              <img src="{{emp.image.url!=undefined ? getlocalurl : 'img/blank-profile-picture.png'}}{{emp.image.url}}">              
              <h2>{{emp.first_name}}</h2>
              <p>{{emp.designation}}</p>
             </a>
            <a class="item row">
               <i class="icon icon-clr line ion-android-call col col-50" ng-href="tel:{{emp.mobile_number}}" ng-click="call(emp.mobile_number,emp.id);CallPost(emp.id)">&nbsp;CALL</i>
              <i class="icon icon-clr ion-android-textsms col col-50" ng-click="openModal(emp.mobile_number,emp.id,emp.first_name)">&nbsp;MESSAGE</i>
              <!-- <i class="icon icon-clr ion-more col col-40" ng-click="moreDetail(emp)">&nbsp;More Details</i> -->
            </a>
          </div>
          <div class="list" style="color:red;text-align:center;" ng-show="(EmployeesDetails | filter:search).length==0">
            No Records found
          </div>

           <script id="templates/modal.html" type="text/ng-template">
            <ion-modal-view> 
              <ion-header-bar>
                <div class="row">
                  <div class="col col-20" ng-click="closeModal()"><i class="button-icon ion-ios-arrow-back close"></i></div>             
                  <div class="col col-80" > <p class="titletext">Message</p></div>
                </div>
              </ion-header-bar>
              <ion-content>                                        
                  <div class="list list-inset">
                      <p>To : {{nameOpen}}</p>
                      <textarea  class="brd-txt" rows="4" style="width:100%;" ng-model="mode.response" ng-required="true" placeholder="Text Message here"></textarea>
                      <button ng-disabled="!mode.response" ng-click="popup(mNumber,selectedId,mode.response);closeModal();SMSPost(selectedId,mode.response)" class="button button-block button-positive">Send</button>
                  </div>                        
              </ion-content>                    
            </ion-modal-view>
          </script>
     

  </ion-content>

</ion-view>